#{extends 'main.html' /}
#{set title:'PubMed Watcher - Feed' /}
#{script 'pubmed-loader.js' /}

#{set email:email /}
#{menu 'home-link' /}

<div class="container">
	<div class="row-fluid">
	#{list items:keyArticles, as:'keyArticle'}
		#{keyArticle keyArticle /}
	#{/list}
	
	%{
 	 	for(int i = keyArticles.size(); i < 4; i++) { 
	}%
 	 	#{GhostKeyArticle /}
	%{
 		 }
	}%
	</div>

	<div class="row-fluid">
	%{
	  for(int i = 0; i < keyArticles.size(); i++) {
	}%
 	 <div class="span3 text-center">
 	 	<a href="@{Application.removeKeyArticle(keyArticles.get(i).id)}" class="btn" type="button">
  			<i class="icon-trash"></i> delete article
  		</a>
  	</div>
	%{
 	 }
	}%

	%{
 	 	for(int i = keyArticles.size(); i < 4; i++) { 
	}%
 	 <div class="span3 text-center">
 	 	<a href="@{Application.addKeyArticle()}" class="btn" type="button">
  			<i class="icon-file"></i> add article
  		</a>
  	</div>
	%{
 		 }
	}%


</div>

</div>

<div class="container" id="related-articles">
#{list items:relatedArticles, as:'relatedArticle'}
<div class="well" style="display: none;" id="${relatedArticle.pmid}" data-score="${relatedArticle.standardizedSimilarity}" data-id="${relatedArticle.id}">
<a href="@{Application.markAsRead(relatedArticle.id)}" class="btn">mark as read</a>
</div>
#{/list}
</div>

<button id="showMoreRelatedArticles" class="btn" data-pagination="${relatedArticles.size()}" type="button">Show More</button>

<script type="text/javascript">
$(document).ready(function() {
	loadDocuments('${pmids}');
	var maxHeight = 0;
	$('.key-article').each(function(){
		if($(this).height() > maxHeight){
			maxHeight = $(this).height();
			console.log(maxHeight);
		}
	});
	
	$('.key-article').each(function(){
		$(this).height(maxHeight);
	});
	
});
</script>
